# 数据
<!-- :label:`visualization-data` -->

可视化的处理对象是各种类型的数据。
数据是可视化的原材料，深入理解数据的特点与结构是实现有效可视化的基础。
本节将从数据的定义与分类、数据的获取与预处理、数据可视化的挑战三个方面，系统地阐述可视化中的数据基础知识。

## 什么是数据

### 数据的定义与特征
数据是客观世界的抽象记录，是信息表达的载体，也是可视化的核心原料。其本质是通过符号、数字、文字、图像等形式对现实世界的观察、测量或计算结果进行编码。
数据的特征可归纳为以下几点：

- 客观性：数据反映客观事实，但需通过主观解释赋予意义。例如，温度传感器记录的“25℃”是数据，结合时间、地点后成为“北京夏季平均气温”的信息。
- 多维度性：数据可包含多个属性维度。例如，一次电商交易可能涉及用户ID、商品类别、价格、时间、地理位置等多个字段。
- 动态性：数据随时间和环境变化。实时数据流（如股票行情、社交媒体话题）需要动态可视化以捕捉瞬时状态

广义上，数据可以使用 "6W" 模型来描述，即 What(数据是什么)、When(数据的时间属性)、Where(数据的空间属性)、Who(数据的对象)、Why(数据产生的原因)、How(数据产生的方式)。
这些属性构成了对数据多方面特性的描述。

### 数据分类
数据分类是理解其特性和选择可视化方法的基础，常见的分类维度包括：

**1. 按数据结构：**

- 结构化数据（Structured Data）：
结构化数据具有固定的格式和预定义的数据模型，通常以表格的形式存储在关系型数据库中。每个数据项都有明确的字段和数据类型，不同数据项之间的关系也有明确定义。结构化数据的特点是高度组织化，易于查询、分析和处理。
常见的结构化数据包括：
  - 关系型数据库中的数据表，如 MySQL、Oracle、SQL Server 等。
  - 电子表格中的数据，如 Excel、CSV 文件等。
  - 具有固定格式的日志文件，如 Web 服务器日志、应用程序日志等。

- 半结构化数据（Semi-structured Data）
半结构化数据介于完全结构化和非结构化之间，具有一定的结构和组织，但不如结构化数据严格。半结构化数据通常以树形结构或图形结构来表示，数据项之间的关系相对松散。常见的半结构化数据格式包括 XML、JSON 等。
常见的半结构化数据包括：
  - XML 文档，如 Web 服务的响应、配置文件等。
  - JSON 数据，如 Web API 的响应、NoSQL 数据库（如 MongoDB）中的文档等。
  - 电子邮件，包含结构化的头部信息和非结构化的正文内容。
  - HTML 文档，包含结构化的标签和非结构化的文本内容。

- 非结构化数据（Unstructured Data）：
非结构化数据没有预定义的数据模型或组织结构，通常以自由格式存储。非结构化数据的特点是多样性和不可预测性，难以用传统的数据库技术直接处理和分析。非结构化数据占据了当今数据的绝大部分。
常见的非结构化数据包括：
  - 文本文档，如 Word 文档、PDF 文件、电子邮件正文等。
  - 图像和图形文件，如 JPEG、PNG、BMP 等。
  - 音频和视频文件，如 MP3、WAV、MP4、AVI 等。
  - 社交媒体数据，如推文、帖子、评论等。
  - 传感器数据，如物联网设备采集的原始数据。


**2. 按数据属性：**

- 数值型数据（Quantitative Data）：
数值型数据以数字形式表示，支持加减、平均、方差等数学运算和统计分析，并适合通过位置、长度、面积等视觉通道表达数值差异。
常见的数值型数据包括：
  - 连续型数据：取值在某一区间内无限细分的数据，如气象站记录的每小时温度、患者血压值，股价等。
  - 离散型数据：取值为有限或可数无限个整数的数据，如网站点击次数、电商每日订单数、城市人口数量等。

- 类别型数据（Categorical Data）：
类别型数据表示事物的分类或标签，无法直接进行数学运算，类别数量通常固定（如性别、产品类型）。
常见的类别型数据分为：
  - 有序型数据：类别间存在逻辑顺序或等级关系，如教育程度（小学<中学<大学）、用户满意度评分（1~5星）等。
  - 无序型数据：类别间无明确顺序，仅表示分类差异，如用户性别（男/女/其他）、产品颜色（红/蓝/绿）等。

- 时空型数据（Spatiotemporal Data）：
时空型数据包含时间或空间维度信息，反映现象在时空坐标系中的演化规律、分布特征及相互作用关系。具有时空动态性，数据值随时间推移呈现趋势性、周期性或突变性变化，数据分布则随地理位置呈现聚集、扩散或梯度差异。
常见的时空性数据包括：
  - 时间序列数据：按时间戳记录的连续观测值数据，如股票每日收盘价、气象站每小时降雨量等。
  - 地理空间数据：包含地理位置信息（经纬度、行政区划）的数据，如城市GDP（按省份分布）、共享单车骑行轨迹（GPS坐标）。

**3. 按数据测量尺度：**

- 定量数据（Quantitative Data）：
定量数据以数值形式表示，具有明确的数学意义，支持算术运算（如加减乘除）。其测量尺度为定距尺度（Interval）或定比尺度（Ratio），能够反映事物的数量、强度或程度差异。
定量数据一般包括：
  - 连续型定量数据：取值在区间内无限细分（如温度、身高）。
  - 离散型定量数据：取值为有限或可数无限个整数（如人口数量、订单数）。

- 定序数据（Ordinal Data）：
定序数据表示类别之间的顺序或等级关系，但无法量化差异程度。其测量尺度为顺序尺度（Ordinal），仅支持排序（如A > B > C），不满足加减运算。
定序数据一般包括：
  - 主观评价数据：如用户满意度评分，疼痛等级等。
  - 等级分类数据：如教育程度，产品评级等。
  - 阶段划分数据：如癌症分期， 项目进度等。

- 定类数据（Nominal Data）：
定类数据表示无顺序或等级差异的纯分类，仅用于标识事物类别。其测量尺度为名义尺度（Nominal），仅支持频次统计，无法进行排序或数学运算。
定类数据一般包括：
  - 自然类别数据：人口属性如性别、血型，地理分类如国家、省份等。
  - 人工编码数据：产品类型如手机、笔记本电脑、平板电脑等，行业分类如金融、教育、医疗、制造业等。
  - 二元数据：是否类数据如用户是否订阅服务（是/否）。

数据的分类是构建有效分析框架的基石。
不同的分类方式服务于不同的分析目标，不仅界定了技术工具的选择边界（如关系型数据库适配结构化数据，自然语言处理应对非结构化文本），更规避了方法论误用风险（如对定类数据计算均值）。
理解分类的本质，是从数据混沌中提取信息、从信息中凝练知识的关键跃迁，才能在可视化时 根据数据的不同特点来采取不同的处理与映射方式。

除了数据类型，在考虑可视化设计时还需要关注数据的以下特征：
- 数据规模：数据量的大小，海量数据对可视化系统的渲染与交互提出更高要求。
- 数据维度：数据包含的属性个数，高维数据给可视化带来表达与感知的挑战。
- 数据分布：数据在各个取值范围内的分布密度，不同分布特征可能蕴含不同的模式。
- 数据质量：数据中噪声、缺失、异常等问题的严重程度，低质量数据可能需要额外的清洗与修复。
- 数据语义：数据所包含的专业、业务语义，可视化的设计需要考虑具体的数据分析任务。


## 数据获取与处理


数据预处理：在创建可视化之前，为了使可视化更有意义和有效，通常需要对数据进行预处理．这些步骤有助于确保可视化结果的准确性、清晰度和可解释性．以下是可视化数据预处理的一些关键方面：
- 数据清洗：删除或修复数据中的错误、异常值或不一致性，以确保可视化结果不会受到数据质量问题的干扰．
- 缺失值处理：如果数据中存在缺失值，需要考虑如何在可视化中处理它们，例如填充缺失值、忽略包含缺失值的数据点或提供额外的信息来表示缺失值．
- 数据转换：根据可视化的需求，可能需要对数据进行转换，例如进行对数变换、标准化或归一化，以使数据更适合可视化．
- 数据筛选：选择与可视化目标相关的数据子集，以减小数据量并聚焦于关键信息．
- 数据聚合：在可视化中使用汇总数据或聚合数据以提供更高层次的概览和趋势．
- 数据标签：确保可视化中的数据点或元素都具有适当的标签，以帮助观众理解图表中的信息．
- 数据排序：对数据进行排序，以突出重要的趋势或模式．
- 数据标尺和单位：确保可视化中的轴标尺和单位是清晰的，以帮助观众理解数据的刻度和度量．
- 数据注释：为了提供更多的上下文和解释，可以在可视化中添加文字注释或标记．


## 数据科学的挑战

大数据为可视化带来的问题：
高维数据可视化，复杂、异构数据可视化，针对海量数据的实时交互设计，分布式协同可视化，以及针对大数据的可视分析流程等。

