# 几何形状的建模

了解了对几何形状的不同表示方法后，本节我们将介绍几何形状的建模方法，即，现实世界中如何能够获得一个复杂几何形状在计算机中的表示。

## 基于计算机辅助设计建模

```{figure} fig/blender.jpg
:name: fig-geometry-basis-blender
:width: 60%

Blender 软件界面。
```

计算机辅助设计（Computer-Aided Design，CAD），指的是利用计算机软件协助，来对某种设计进行创建、修改、分析或优化。在几何建模领域，CAD 建模通常指使用特定软件（例如 Blender、Autodesk）来创建三维实体模型的过程，如 {numref}`fig-geometry-basis-blender` 所示。

早期的 CAD 建模使用参数化建模作为核心技术，通过定义几何模型的参数与约束关系实现可驱动、可编辑的数字化设计。其核心思想是将几何形状抽象为数学参数（如尺寸、角度、位置等）及逻辑约束（如平行、垂直、相切等关系），并建立参数间的动态关联。当修改某一参数时，模型能根据预设的约束规则自动调整形态，保证设计的一致性与合理性。参数化建模的核心要素包括：

1. 参数驱动：几何特征由显式参数控制（例如圆柱体的半径和高度）；
2. 特征历史树：记录建模过程的操作序列，支持回溯修改；
3. 约束求解器：通过算法解析几何约束冲突，确保模型拓扑正确性。

参数化建模的优势在于能够高效迭代，通过调整参数快速生成设计变体，适应工程优化需求，同时兼具设计复用，其模板化参数模型可适配不同场景（如标准件库）；然而，这种方法也面临着挑战，主要包括复杂约束下的计算效率问题，以及非线性设计的表达能力限制。因此，现代的 CAD 系统通常同时也会支持另一种 CAD 范式：直接建模。

直接建模不再以参数驱动几何特征的控制，也无需维护特征历史树，而是允许设计师直接调整几何形状，呈现“所见即所得”的范式。在此，构造实体几何（Constructive Solid Geometry, CSG）是一种基于布尔运算与基本体素组合的重要三维建模方法。其核心思想是通过对简单几何基元（称为“体素”，如立方体、圆柱体、球体等）进行集合运算，逐步构造复杂三维模型。CSG 的核心操作是布尔运算，包括三种基本类型：

1. 并集（Union）：合并两个体素的体积，消除内部重叠部分；
2. 交集（Intersection）：仅保留两个体素的重叠区域；
3. 差集（Subtraction）：用一物体切除另一物体的部分形状（如钻孔）。

体素组合通过树状结构（CSG树）记录建模过程：叶节点为基本体素，非叶节点为布尔运算或几何变换。例如，通过圆柱体与长方体的差集运算可生成带圆孔的机械零件。这种方式的优势在于较为直观，符合人类“切割-拼接”的实体构造思维，同时保持数据紧凑并保证模型始终为有效闭合实体。其局限性在于难以直接描述自由曲面，以及复杂模型的布尔运算会产生效率问题。现代 CAD 系统常将 CSG 与边界表示（B-rep）结合，兼顾设计灵活性与细节编辑能力。

得益于成熟的三维建模软件和相对统一的三维数据格式，基于计算机辅助设计的几何建模往往意味着高度数字化的设计流程，具有较好的标准化、可复用性。尽管如此，高质量的 CAD 建模仍然需要专业人员在软件上进行精细的编辑操作，制作所花费的人力和时间成本往往与所需模型的精细程度直接相关。

## 三维重建

不同于基于计算机辅助设计的几何建模，三维重建（3D reconstruction）作为另一种几何建模的范式，旨在直接对现实世界的物体或场景进行重建，还原其几何形状与外观等属性。三维重建的优势在于这种几何建模范式是数据驱动的，具有以较高的真实感还原目标对象或场景的能力，适用于对真实感或精度要求较高的场合，例如文物数字化保护中的高精度扫描，医疗影像重建，或是虚拟现实内容生成等。三维重建技术按照硬件设备的特性可以分为主动式和被动式两种类型。主动式的三维重建采用激光雷达、结构光等特殊的传感设备，主动对场景进行感知，直接重建出目标对象的几何属性；被动式的三维重建则以拍摄好的图像或视频为输入，通过特定的立体视觉算法从多视角图像中检测一致性关系，从而建立多视角几何约束，并解算出图像中的三维信息。

```{figure} fig/reconstructed.png
:name: fig-geometry-basis-recon
:width: 60%

重建得到的高精度几何模型。
```

如 {numref}`fig-geometry-basis-recon` 所示，前沿的三维重建能够以较高的质量恢复目标对象的几何形状，为后续的分析处理奠定了基础。三维重建作为 3D 数据的重要来源，也是可视计算领域密切关注的主题，我们将在 {numref}`chap-geometry-reconstruction` 中进一步详细介绍。
